--- rc.orig     2014-01-17 05:53:12.000000000 +0400
+++ rc  2015-10-01 00:24:05.000000000 +0400
@@ -124,14 +124,22 @@
 fi

 files=`rcorder ${skip} ${skip_firstboot} /etc/rc.d/* ${local_rc} 2>/dev/null`
+_init_rc=
 for _rc_elem in ${files}; do
        case "$_rc_elem_done" in
        *" $_rc_elem "*)        continue ;;
        esac

-       run_rc_script ${_rc_elem} ${_boot}
+       _init_rc="${_init_rc} $(basename ${_rc_elem})"
 done

+(
+       INIT_DIR=/etc/rc.d
+       LOCK_DIR=/tmp/init.lock
+       set ${_boot} ${_init_rc}
+       . /etc/jet9-multitask-init
+)
+
 # Remove the firstboot sentinel, and reboot if it was requested.
 if [ -e ${firstboot_sentinel} ]; then
        rm ${firstboot_sentinel}
